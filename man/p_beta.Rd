% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/p_beta.R
\name{p_beta}
\alias{p_beta}
\title{Beta Decomposition and Treynor Ratio (Full and Tail-Based)}
\usage{
p_beta(
  data_var,
  data_index,
  var_cols,
  index_col,
  weights = NULL,
  tau = 0.05,
  rf = 0
)
}
\arguments{
\item{data_var}{A numeric matrix or data.frame containing asset returns.}

\item{data_index}{A numeric matrix or data.frame containing index returns.}

\item{var_cols}{Column indices or names of asset return variables.}

\item{index_col}{Column index or name of the market index variable.}

\item{weights}{Optional numeric vector of portfolio weights.
Must have same length as number of assets.}

\item{tau}{Numeric. Tail probability level for quantile thresholds
(default = 0.05).}

\item{rf}{Numeric. Risk-free rate used in Treynor ratio (default = 0).}
}
\value{
A data.frame containing:
\describe{
\item{beta}{Full-sample CAPM beta}
\item{beta_mid}{Beta estimated in the middle quantile region}
\item{beta_low}{Lower-tail beta}
\item{beta_high}{Upper-tail beta}
\item{treynor}{Treynor ratio}
}
}
\description{
Computes CAPM beta coefficients for multiple assets relative to a market index.
In addition to full-sample beta, the function estimates lower-tail,
upper-tail, and middle-region betas based on quantile thresholds.
}
\details{
Optionally, portfolio beta and Treynor ratio can be computed
if portfolio weights are provided.

Tail betas are estimated using conditional subsamples defined by
the lower and upper quantiles of the market index returns.
The Treynor ratio is computed as:
\deqn{(E[R_i] - r_f) / \beta_i}
}
\examples{
set.seed(1)
R_assets <- matrix(rnorm(300), ncol = 3)
R_index  <- matrix(rnorm(100), ncol = 1)

colnames(R_assets) <- c("A", "B", "C")
colnames(R_index)  <- "MKT"

p_beta(R_assets, R_index,
       var_cols = 1:3,
       index_col = 1)

}
